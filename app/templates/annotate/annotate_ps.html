{% extends "base.html" %} {% import "bootstrap/wtf.html" as wtf %} {% block
app_content %}
<body>
  <div class="container">
    <h1>
      Annotating psychotherapy session: <strong>{{ dataset_name }}</strong>
    </h1>
    <h2>Page {{ page }} of {{ total_pages }}</h2>
    <p>Time since start of session: {{ start_time.strftime("%H:%M:%S") }}</p>
    <ul class="list-group">
      {% for item in page_items %} {% if item.event_speaker == 'Therapist' %}
      <li class="list-group-item list-group-item-secondary">
        {% elif item.event_speaker == 'Client' %}
      </li>

      <li class="list-group-item list-group-item-info">
        {% elif item.event_speaker == 'Annotator' %}
      </li>

      <li class="list-group-item list-group-item-success">
        {% endif %} {{ item.event_n }}.
        <strong>{{ item.event_speaker }}:</strong> {{ item.event_plaintext }}
      </li>
      {% endfor %}
    </ul>

    <!-- Pagination -->
    <nav aria-label="...">
      <ul class="pager">
        <li class="previous{% if not prev_url %} disabled{% endif %}">
          <a href="{{ prev_url or '#' }}">
            <span aria-hidden="true">&larr;</span> Previous
          </a>
        </li>
        <li class="next{% if not next_url %} disabled{% endif %}">
          <a href="{{ next_url or '#' }}">
            Next <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
        <li class="first{% if not first_url %} disabled{% endif %}">
          <a href="{{ first_url or '#' }}">
            <span aria-hidden="true">&larr;</span> First
          </a>
        </li>
        <li class="last{% if not last_url %} disabled{% endif %}">
          <a href="{{ last_url or '#' }}">
            Last <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      </ul>
    </nav>

    <h3>Annotate this page:</h3>

    <!-- Buttons to toggle annotation forms at the segment level -->
    <div class="d-flex justify-content-center">
      <button
        type="button"
        class="btn btn-primary mx-2"
        id="btn_client"
        data-toggle="collapse"
        data-target="#form_client"
      >
        Client
      </button>
      <button
        type="button"
        class="btn btn-primary mx-2"
        id="btn_therapist"
        data-toggle="collapse"
        data-target="#form_therapist"
      >
        Therapist
      </button>
    </div>

    <!-- Form 1 -->
    <div id="form_client" class="collapse">
      {{ wtf.quick_form(form_client) }}
    </div>

    <!-- Form 2 -->
    <div id="form_therapist" class="collapse">
      {{ wtf.quick_form(form_therapist) }}
    </div>
  </div>
</body>
{% endblock %}

<!-- Custom CSS Styles for buttons -->
{% block styles %} {{ super() }}
<style>
  /* Custom styles for buttons */
  #btn_client,
  #btn_therapist {
    background-color: #007bff;
    border-color: #007bff;
    color: #fff;
  }
  /* Custom styles for active buttons */
  #btn_client.active,
  #btn_therapist.active {
    background-color: #0069d9;
    border: 2px solid black;
    color: #fff;
  }
</style>
{% endblock %}

<!-- Use JavaScript to handle button behavior dynamically when clicked on -->
{% block scripts %} {{ super() }}
<script>
  $(document).ready(function () {
    $("#btn_client").on("click", function () {
      if ($(this).hasClass("active")) {
        // Button is already active, so deactivate it
        $("#form_client").collapse("hide"); // Hide client form
        $(this).removeClass("active"); // Remove active class from client button
      } else {
        // Button is not active, so activate it
        $("#form_therapist").collapse("hide"); // Hide therapist form
        $("#form_client").collapse("show"); // Show client form
        $("#btn_therapist").removeClass("active"); // Remove active class from therapist button
        $(this).addClass("active"); // Add active class to client button
      }
    });
    $("#btn_therapist").on("click", function () {
      if ($(this).hasClass("active")) {
        // Button is already active, so deactivate it
        $("#form_therapist").collapse("hide"); // Hide therapist form
        $(this).removeClass("active"); // Remove active class from therapist button
      } else {
        // Button is not active, so activate it
        $("#form_client").collapse("hide"); // Hide client form
        $("#form_therapist").collapse("show"); // Show therapist form
        $("#btn_client").removeClass("active"); // Remove active class from client button
        $(this).addClass("active"); // Add active class to therapist button
      }
    });
  });
</script>
{% endblock %}
