{% extends "base.html" %} {% block app_content %} {% block head%} {{ super() }}
<!-- Reference custom CSS file for button rendering -->
<link
  rel="stylesheet"
  type="text/css"
  href="{{ url_for('static', filename='styles.css') }}"
/>
{% endblock %}

<body>
  <div class="container" style="padding-bottom: 30px">
    <!-- flash a message if any of the forms has an error -->
    {% if form.errors%}
    <div class="alert alert-danger" role="alert">
      There were errors in the annotations form. Please correct them and try
      again.
    </div>
    {% endif %}
    <h1>
      Annotating psychotherapy session: <strong>{{ dataset_name }}</strong>
    </h1>
    <h2>Page {{ request.args.get('page') }} of {{ total_pages }}</h2>
    <p>Time since start of session: {{ start_time.strftime("%H:%M:%S") }}</p>
    <ul class="list-group">
      {% for item in page_items %} {% if item.event_speaker == 'Therapist' %}
      <li class="list-group-item list-group-item-secondary">
        {% elif item.event_speaker == 'Client' %}
      </li>

      <li class="list-group-item list-group-item-info">
        {% elif item.event_speaker == 'Annotator' %}
      </li>

      <li class="list-group-item list-group-item-success">
        {% endif %} {{ item.event_n }}.
        <strong>{{ item.event_speaker }}:</strong> {{ item.event_plaintext }}
      </li>
      {% endfor %}
    </ul>

    <!-- Pagination -->
    <nav aria-label="...">
      <ul class="pager">
        <li class="previous{% if not prev_url %} disabled{% endif %}">
          <a href="{{ prev_url or '#' }}">
            <span aria-hidden="true">&larr;</span> Previous
          </a>
        </li>
        <li class="next{% if not next_url %} disabled{% endif %}">
          <a href="{{ next_url or '#' }}">
            Next <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
        <li class="first{% if not first_url %} disabled{% endif %}">
          <a href="{{ first_url or '#' }}">
            <span aria-hidden="true">&larr;</span> First
          </a>
        </li>
        <li class="last{% if not last_url %} disabled{% endif %}">
          <a href="{{ last_url or '#' }}">
            Last <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      </ul>
    </nav>

    <h3>Annotate this page:</h3>

    <!-- Buttons to navigate to the client, therapist or dyad views -->
    <div class="d-flex justify-content-center">
      <button
        type="button"
        class="btn btn-primary mx-2"
        id="btn_client"
        url="{{ url_for('annotate.annotate_psy', speaker='client', dataset_id=dataset_id, page=request.args.get('page')) }}"
      >
        Client
      </button>
      <button
        type="button"
        class="btn btn-primary mx-2"
        id="btn_therapist"
        url="{{ url_for('annotate.annotate_psy', dataset_id=dataset_id, speaker='therapist', page=request.args.get('page')) }}"
      >
        Therapist
      </button>
      <button
        type="button"
        class="btn btn-primary mx-2"
        id="btn_dyad"
        url="{{ url_for('annotate.annotate_psy', dataset_id=dataset_id, speaker='dyad', page=request.args.get('page')) }}"
      >
        Dyad
      </button>
    </div>
  </div>
</body>
{% endblock %}

<!-- Use JavaScript to handle button behavior dynamically when clicked on -->
{% block scripts %} {{ super() }}
<script
  type="text/javascript"
  src="{{ url_for('static', filename='psychotherapy_form_buttons.js') }}"
></script>
<script
  type="text/javascript"
  src="{{ url_for('static', filename='add_label_client_buttons.js') }}"
></script>
{% endblock %}
