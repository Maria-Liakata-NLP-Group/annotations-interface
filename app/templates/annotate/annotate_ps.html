{% extends "base.html" %} {% import "bootstrap/wtf.html" as wtf %} {% block
app_content %} {% block head%} {{ super() }}
<!-- Reference custom CSS file for button rendering -->
<link
  rel="stylesheet"
  type="text/css"
  href="{{ url_for('static', filename='styles.css') }}"
/>
{% endblock %}

<body>
  <div class="container" style="padding-bottom: 30px">
    <!-- flash a message if any of the forms has an error -->
    {% for form in [form_client, form_therapist, form_dyad] %} {% if form.errors
    %}
    <div class="alert alert-danger" role="alert">
      There were errors in the annotations form. Please correct them and try
      again.
    </div>
    {% endif %} {% endfor %}
    <h1>
      Annotating psychotherapy session: <strong>{{ dataset_name }}</strong>
    </h1>
    <h2>Page {{ page }} of {{ total_pages }}</h2>
    <p>Time since start of session: {{ start_time.strftime("%H:%M:%S") }}</p>
    <ul class="list-group">
      {% for item in page_items %} {% if item.event_speaker == 'Therapist' %}
      <li class="list-group-item list-group-item-secondary">
        {% elif item.event_speaker == 'Client' %}
      </li>

      <li class="list-group-item list-group-item-info">
        {% elif item.event_speaker == 'Annotator' %}
      </li>

      <li class="list-group-item list-group-item-success">
        {% endif %} {{ item.event_n }}.
        <strong>{{ item.event_speaker }}:</strong> {{ item.event_plaintext }}
      </li>
      {% endfor %}
    </ul>

    <!-- Pagination -->
    <nav aria-label="...">
      <ul class="pager">
        <li class="previous{% if not prev_url %} disabled{% endif %}">
          <a href="{{ prev_url or '#' }}">
            <span aria-hidden="true">&larr;</span> Previous
          </a>
        </li>
        <li class="next{% if not next_url %} disabled{% endif %}">
          <a href="{{ next_url or '#' }}">
            Next <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
        <li class="first{% if not first_url %} disabled{% endif %}">
          <a href="{{ first_url or '#' }}">
            <span aria-hidden="true">&larr;</span> First
          </a>
        </li>
        <li class="last{% if not last_url %} disabled{% endif %}">
          <a href="{{ last_url or '#' }}">
            Last <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      </ul>
    </nav>

    <h3>Annotate this page:</h3>

    <!-- Buttons to toggle annotation forms at the segment level -->
    <div class="d-flex justify-content-center">
      <button
        type="button"
        class="btn btn-primary mx-2"
        id="btn_client"
        data-toggle="collapse"
        data-target="#form_client"
      >
        Client
      </button>
      <button
        type="button"
        class="btn btn-primary mx-2"
        id="btn_therapist"
        data-toggle="collapse"
        data-target="#form_therapist"
      >
        Therapist
      </button>
      <button
        type="button"
        class="btn btn-primary mx-2"
        id="btn_dyad"
        data-toggle="collapse"
        data-target="#form_dyad"
      >
        Dyad
      </button>
    </div>

    <!-- Client form -->
    {% include "annotate/client_form.html" %}

    <!-- Therapist form -->
    {% include "annotate/therapist_form.html" %}

    <!-- Dyad form -->
    {% include "annotate/dyad_form.html" %}
  </div>
</body>
{% endblock %}

<!-- Call JavaScript scripts -->
{% block scripts %} {{ super() }}
<script
  type="text/javascript"
  src="{{ url_for('static', filename='psychotherapy_form_buttons.js') }}"
></script>
<script
  type="text/javascript"
  src="{{ url_for('static', filename='add_label_client_buttons.js') }}"
></script>
<script
  type="text/javascript"
  src="{{ url_for('static', filename='dynamic_select_field_choices.js') }}"
></script>
<script
  type="text/javascript"
  src="{{ url_for('static', filename='make_comment_field_compulsory.js') }}"
></script>
<script
  type="text/javascript"
  src="{{ url_for('static', filename='make_placholder_choice_invalid.js') }}"
></script>
{% endblock %}
